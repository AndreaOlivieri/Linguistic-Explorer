<%- @search.property_categories.each do |category| -%>
  <%- prop_label = search_prop_label(category) -%>
  <%= content_tag :fieldset, :id => prop_label.underscorize do %>
    <div>
      <%= f.label :properties, prop_label, :for => search_options_id(prop_label) %>
      <%= f.select :properties, @search.property_options(category), {},
        :name => search_field_name(:properties, category.id),
        :multiple => true,
        :id => search_options_id(prop_label)
      %>
    </div>
    <div>
      <%= f.label "group", "Any", :for => categorized_set_id(category.name, "any") %>
      <%= f.radio_button "property_set", "any", :checked => true,
        :id => categorized_set_id(category.name, "any"),
        :name => categorized_field_name(:property, category.id) %>
      <%= f.label "property_set", "All", :for => categorized_set_id(category.name, "all") %>
      <%= f.radio_button "property_set", "all",
        :id => categorized_set_id(category.name, "all"),
        :name => categorized_field_name(:property, category.id) %>
    </div>
    <div>
      <%- keyword_label = "#{category.name} Keywords" -%>
      <%= f.label :ling_keywords, keyword_label, :for => search_text_id(keyword_label) %>
      <%= f.text_field :ling_keywords,
        :id => search_text_id(keyword_label),
        :name => search_text_field_name(:property_keywords, category.id) %>
    </div>
  <% end %>
<%- end -%>
